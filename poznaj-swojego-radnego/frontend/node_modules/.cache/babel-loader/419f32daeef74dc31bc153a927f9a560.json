{"ast":null,"code":"import { PostgrestQueryBuilder } from '@supabase/postgrest-js';\nimport { SupabaseRealtimeClient } from './SupabaseRealtimeClient';\nexport class SupabaseQueryBuilder extends PostgrestQueryBuilder {\n  constructor(url, {\n    headers = {},\n    schema,\n    realtime,\n    table,\n    fetch,\n    shouldThrowOnError\n  }) {\n    super(url, {\n      headers,\n      schema,\n      fetch,\n      shouldThrowOnError\n    });\n    this._subscription = null;\n    this._realtime = realtime;\n    this._headers = headers;\n    this._schema = schema;\n    this._table = table;\n  }\n  /**\n   * Subscribe to realtime changes in your database.\n   * @param event The database event which you would like to receive updates for, or you can use the special wildcard `*` to listen to all changes.\n   * @param callback A callback that will handle the payload that is sent whenever your database changes.\n   */\n  on(event, callback) {\n    if (!this._realtime.isConnected()) {\n      this._realtime.connect();\n    }\n    if (!this._subscription) {\n      this._subscription = new SupabaseRealtimeClient(this._realtime, this._headers, this._schema, this._table);\n    }\n    return this._subscription.on(event, callback);\n  }\n}","map":{"version":3,"names":["PostgrestQueryBuilder","SupabaseRealtimeClient","SupabaseQueryBuilder","constructor","url","headers","schema","realtime","table","fetch","shouldThrowOnError","_subscription","_realtime","_headers","_schema","_table","on","event","callback","isConnected","connect"],"sources":["../../../src/lib/SupabaseQueryBuilder.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,qBAAqB,QAAQ,wBAAwB;AAC9D,SAASC,sBAAsB,QAAQ,0BAA0B;AAIjE,OAAM,MAAOC,oBAAwB,SAAQF,qBAAwB;EAOnEG,YACEC,GAAW,EACX;IACEC,OAAO,GAAG,EAAE;IACZC,MAAM;IACNC,QAAQ;IACRC,KAAK;IACLC,KAAK;IACLC;EAAkB,CAQnB;IAED,KAAK,CAACN,GAAG,EAAE;MAAEC,OAAO;MAAEC,MAAM;MAAEG,KAAK;MAAEC;IAAkB,CAAE,CAAC;IAxBpD,KAAAC,aAAa,GAAkC,IAAI;IA0BzD,IAAI,CAACC,SAAS,GAAGL,QAAQ;IACzB,IAAI,CAACM,QAAQ,GAAGR,OAAO;IACvB,IAAI,CAACS,OAAO,GAAGR,MAAM;IACrB,IAAI,CAACS,MAAM,GAAGP,KAAK;EACrB;EAEA;;;;;EAKAQ,EAAEA,CACAC,KAAyB,EACzBC,QAAuD;IAEvD,IAAI,CAAC,IAAI,CAACN,SAAS,CAACO,WAAW,EAAE,EAAE;MACjC,IAAI,CAACP,SAAS,CAACQ,OAAO,EAAE;;IAE1B,IAAI,CAAC,IAAI,CAACT,aAAa,EAAE;MACvB,IAAI,CAACA,aAAa,GAAG,IAAIV,sBAAsB,CAC7C,IAAI,CAACW,SAAS,EACd,IAAI,CAACC,QAAQ,EACb,IAAI,CAACC,OAAO,EACZ,IAAI,CAACC,MAAM,CACZ;;IAEH,OAAO,IAAI,CAACJ,aAAa,CAACK,EAAE,CAACC,KAAK,EAAEC,QAAQ,CAAC;EAC/C","ignoreList":[]},"metadata":{},"sourceType":"module"}